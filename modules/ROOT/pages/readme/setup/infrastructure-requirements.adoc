= Infrastructure Requirements

== _Overview_

This document outlines the _infrastructure requirements_ for deploying the _Inji Stack_ in a _Proof of Concept (POC)_ or _demo sandbox environment_ or _small scale pilot_. It serves as a comprehensive reference for system architects, DevOps engineers, and IT administrators who are responsible for provisioning and configuring the virtualized infrastructure required to run Inji modules effectively.

The Inji Stack enables secure issuance, holding, and verification of _Verifiable Credentials (VCs)_ and includes services such as Inji Web Wallet, Inji Mobile Wallet, Inji Verify, and Inji Certify. To demonstrate these capabilities effectively, a stable and scalable Kubernetes-based deployment environment is essential. To showcase these capabilities in a demo, small scale pilot or POC setting, the stack must be deployed on a Kubernetes cluster with properly allocated resources, network settings, and domain configurations.

_This document outlines the necessary hardware, VM provisioning details, cluster roles, and optional components to support observability and access control._

=== _Purpose of this Document_

_ Define the _minimum infrastructure* required for running all components of Inji Stack.
_ Specify _node roles_, _hardware configurations_, and _networking prerequisites*.
_ Provide _guidelines for optional tools* like Rancher and Keycloak, if Role-Based Access Control (RBAC) and observability are desired.
_ Highlight key considerations around _DNS setup_, _SSL certificates_, and _VM provisioning*.

=== _Who Should Use This Document?_

_ _DevOps Engineers* setting up and maintaining the Inji Stack environments.
_ _System Integrators_ or _Partner Teams* participating in small scale pilots, POCs or sandbox testing.
_ _IT Teams* preparing demo infrastructure for showcasing Inji capabilities.
_ _Solution Architects* planning how to scale from demo to production-ready deployments.

=== _How It Helps_

_ Reduces ambiguity by clearly stating _resource needs_ and _cluster expectations*.
_ Supports _repeatable deployments* by defining baseline configurations.
_ Acts as a starting point to scale up to a _high-availability production architecture*.

== _Cluster Roles_

Refer to [_Kubernetes Core Components_](https://kubernetes.io/docs/concepts/overview/components/#core-components) for standard terminology.

=== _Cluster Composition_

_ The environment consists of _3 Virtual Machines (VMs)* functioning as separate nodes in a Kubernetes cluster.
* Three nodes mentioned above respective two roles discussed below.

==== _Control Plane Node_

_ _Purpose*: Acts as both the master node and the etcd plane node.
_ _Role*: Hosts all essential Kubernetes components required to orchestrate and manage the cluster.

==== _Worker Node_

_ _Purpose*: Serves as a dedicated worker node for running the complete Inji Stack.
_ _Role*: Hosts all services across all modules of Inji.

==== _Cluster-wide Role Assignment_:

* All cluster nodes are assigned to all of the above-mentioned cluster roles.
  * Proper configuration and resource allocation ensure seamless functioning of the cluster.

=== _Hardware Requirements_

| _Usage_                 | _VMs_ | _vCPU_ | _RAM_ | _HDD_ | _Network Interface_ |
| ------------------------- | ------- | -------- | ------- | ------- | --------------------- |
| Inji-Cluster Worker Nodes | 3       | 8        | 32GB    | 64GB    | 1 Private             |
| Inji-Cluster NGINX        | 1       | 4        | 8GB     | 128GB   | 1 Private + 1 Public  |
| Wireguard Bastion Server  | 1       | 2        | 4GB     | 30GB    | 1 Private + 1 Public  |



{% hint style="warning" %}
_Note:_ This configuration is for Proof of Concept, Small scale pilot, demonstration and evaluation purposes only. For production deployments, follow high availability best practices as outlined in the Kubernetes or RKE documentation to be able to sustain failures.
{% endhint %}

== _Production Guidelines (Optional for POC)_

For reference, follow Rancherâ€™s production-ready checklist and instruction for RKE which are mentioned here : [_Recommended Cluster Architecture - Rancher_](https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/checklist-for-production-ready-clusters/recommended-cluster-architecture).

=== _Optional Components (Observability and RBAC)_

In case Rancher is used for cluster management and Keycloak is integrated for Role-Based Access Control (RBAC), the following infrastructure is additionally required:

==== _Observation Cluster Setup_

| _Usage_                 | _VMs_ | _vCPU_ | _RAM_ | _HDD_ | _Network Interface_ |
| ------------------------- | ------- | -------- | ------- | ------- | --------------------- |
| Observation Cluster Nodes | 2       | 4        | 8GB     | 64GB    | 1 Private             |
| Observation Cluster NGINX | 1       | 4        | 8GB     | 64GB    | 1 Private             |

=== _SSL Certificate Requirements_

_ _Two wildcard SSL certificates* are recommended:
  . One for Inji cluster components (e.g., \*.inji.example.org) mapping.
  . (Optional) One for Observation cluster components if deployed separately.

=== _Network Requirements_

_ All VMs must be able to _communicate with each other_ over a stable _private network*.
_ _Stable internet connectivity* is needed on all VMs for:
  * Docker image downloads.
  * External software updates (or access to a local Docker registry for offline setups).
* Networking interfaces must be configured as per the Hardware table requirements given above:
  * Public and private interfaces, where required.

=== _DNS Requirements_

_ Access to a _DNS server_ to map multiple subdomains under a wildcard domain (e.g., \_.inji.example.org).
* Subdomain mapping enables hosting of services and components such as:
  * verify.inji.example.org
  * certify.inji.example.org
  * certify.web.example.org
  * etc.

== _Conclusion_

This infrastructure specification provides the baseline setup needed to deploy the Inji Stack for showcasing its verifiable credentials capabilities as an end-to-end ecosystem. While the current configurations are optimized for Proof of Concept, Small scale pilot and demo scenarios, this document also points to production-ready practices for teams planning to transition to a fully operational environment.
